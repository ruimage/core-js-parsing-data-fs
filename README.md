# Парсинг данных: из CSV в JS в CSV

## Введение

Когда ты запускаешь свои приложения, создаются объекты JS, которые хранятся в памяти твоего компьютера. Состояние «нахождения в памяти» теряется, когда приложение заканчивает работу, поэтому, если хочешь сохранить информацию из приложения, то нужно записать её где-нибудь.

В дополнение к сохранению информации из своих программ для себя, ты иногда хочешь поделиться этой информацией с другими системами или программами. Для этого, помимо простого сохранения данных, нужно сохранить их в формате, который совместим с этими другими системами, и который легко переносится.

Существует общий подход к сохранению информации в различных форматах - это преобразование информации в текст. XML, JSON, CSV и YAML - все это примеры текстовых форматов для обмена данными. Рекомендуем ознакомиться со всеми перечисленными форматами, они пригодятся тебе в будущем.

В этой задаче ты будешь использовать [CSV][wikipedia csv] в качестве формата для хранения данных. Ты будешь представлять людей в JS в качестве экземпляров класса `Person`. То есть ты вытащишь данные из CSV-файла, а затем создашь по объекту `Person`  на основе каждой строки данных из файла. Ну и в конце концов, сохранишь объекты класса `Person` в новый CSV-файл.


## Releases
### Release 0. Люди как объекты JS
Начни с создания класса `Person`. Твой класс должен быть предназначен для представления данных, найденных в файле `people.csv`. Другими словами, экземпляр класса `Person` должен иметь имя, фамилию и т. д.

Тебе надо написать тесты для проверки правильности функционирования класса `Person`.


### Release 1. Парсинг из CSV в JS

Теперь есть класс, предназначенный для представления человека. Чтобы создать объект `Person`, тебе нужно предоставить некоторые данные: имя, фамилию и т.д. Для создания объекта не имеет значения, откуда берутся эти данные. Данные могут предоставляться через пользовательский интерфейс, который может быть на веб-странице. Но в этой задаче данные поступают из файла CSV.

Теперь напиши класс `PerfectParser`, ответственный за анализ текста в файле и формирование объектов `Person` из его данных. Напиши метод `.parse()`. Этот метод должен преобразовывать каждую строку из csv-файла в объект класса `Person`  и возвращать массив из этих объектов.

```js
const parser = new PerfectParser();
const people = parser.parse('people.csv');
console.log(people);
// => [Person {...}, Person {...}, Person {...}]
console.log(people[0] instanceof Person);
// => true

```
*Рисунок 1*. Вызов метода `parse`, который возвращает массив объектов `Person` на основе данных из CSV-файла.


### Release 2. Соответствующие типы данных в JS
В твоём CSV-файле все представлено в текстовом формате. Это означает, что вся информация из файла приходит в программу в виде строки. Иногда это уместно. Названия, номера телефонов и адреса электронной почты легко представляются в виде строк. В других случаях может оказаться полезным привести текст CSV более подходящему типу.

В `people.csv` дата и время рождения человека сохранены в поле `bornAt`. В CSV-файле это строка в формате `YYYY-MM-DD HH:MM:SS`. Эта строка представляет дату и время, js в свою очередь предоставляет нам такой инструмент, как [Date][], специально созданный для представления даты и времени.

Когда ты создаешь объекты `Person`  из CSV-файла, то приводи свойство `bornAt` к "типу" `Date`. Также, возможно тебе понадобится метод [Date.parse()][] или другие методы, связанные с [Date][].


### Release 3. Сохранение информации из JS в CSV

>**JavaScript's npm-модули.**
Ты можешь воспользоваться библиотекой (npm-модулем, например: `json2csv`) для того, чтобы записать js объекты в csv. Этот подход будет проще и, возможно, в некоторых случаях правильнее. Однако ты должен понимать как решить данную задачу и без сторонних npm-модулей. `const json2csv = require('json2csv').parse;`


```js
let jane = new Person(...)
let john = new Person(...)

PerfectParser.write('friends.csv', [jane, john])
```

*Рисунок 2*. Создание людей в js и сохранение данных о них в CSV-файле.

Ты научился парсить данные из CSV в js, преобразовывать строчные данные к объектам, и теперь ты можешь использовать полученные данные в своих программах. Допустим, что ты получил данные из файла, поработал с ними, немного отредактировал, что-то добавил, что-то удалил, и теперь хочешь сохранить всё в новый csv-файл. Теперь тебе придется привести твой массив объектов `Person` к нужному формату (строка, csv). У тебя уже заготовлен метод `.write()` у `PerfectParser` для данного релиза. Наполни его своим прекрасным кодом!

## Заключение
Общая цель этой задачи - научиться манипулировать объектами js и CSV как частью одного приложения. Все данные, которые нужны для представления людей, были сохранены в CSV-файле, но CSV-файл был просто текстовым. Создав объекты js на основе данных, мы смогли создать объекты, поведение которых соответствовало потребностям нашего приложения. Это общая схема разработки программного обеспечения: нужно изменить представление данных из формата A в формат B, чтобы упростить работу с X.

[Date]: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Date
[Date.parse()]: https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Date/parse
[wikipedia csv]: https://en.wikipedia.org/wiki/Comma-separated_values
[wikipedia lazy initialization]: https://en.wikipedia.org/wiki/Lazy_initialization
[wikipedia memoization]: https://en.wikipedia.org/wiki/Memoization
